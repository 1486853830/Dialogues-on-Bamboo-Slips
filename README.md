# é’ç®€é—®å¯¹

## é¡¹ç›®ç®€ä»‹
![ä¸»é¡µå±•ç¤º](Technical-documentation/ä¸»é¡µå±•ç¤º.png)

**é’ç®€é—®å¯¹**ï¼Œä¹ƒæ²‰æµ¸å¼å†å²äººç‰©å¯¹è¯ä½“éªŒä¹‹å¹³å°ä¹Ÿã€‚å›å¯ä¸ä¸‰åä½™ä½å¤ä»Šè‹±æ°ï¼ˆå¦‚éœå»ç—…ã€æ›¹æ“ã€å­”å­ç­‰ï¼‰ç•…è°ˆå¤ä»Šï¼Œé¢†ç•¥å„å®¶é£é‡‡ï¼Œæ„Ÿå—åƒå¹´æ™ºæ…§ã€‚å¹³å°é›†AIå¯¹è¯ã€è¯­éŸ³åˆæˆã€è§’è‰²æ‰®æ¼”äºä¸€ä½“ï¼Œæ”¯æŒå¤šè§’è‰²åˆ‡æ¢ä¸èŠ±æ ·äº’åŠ¨ï¼Œå ªç§°å†å²çˆ±å¥½è€…ä¸AIä½“éªŒè€…ä¹‹ä¹å›­ã€‚  
> â€œä¸å¤äººå¯¹è¯ï¼Œä½•é¡»é’ç¯é»„å·ï¼Ÿä¸€é”®å”¤é†’ï¼Œè¯¸è´¤é½èšï¼â€ ğŸ˜ğŸ“œ

---

## é¡¹ç›®æ„¿æ™¯

é’ç®€åœ¨æ‰‹ï¼Œåƒè½½å¦‚æ˜¨ã€‚æˆ‘ä»¬å¸Œæœ›ç”¨AIä¹‹åŠ›ï¼Œå¤ç°å†å²äººç‰©çš„é£é‡‡ï¼Œè®©æ¯ä¸€ä½ç”¨æˆ·éƒ½èƒ½ä¸å¤äººå¯¹è¯ã€ä¸å…ˆè´¤è®ºé“ã€‚æ— è®ºä½ æ˜¯å†å²è¿·ã€æ–‡å­¦æ§ï¼Œè¿˜æ˜¯AIæŠ€æœ¯çˆ±å¥½è€…ï¼Œéƒ½èƒ½åœ¨æ­¤å¹³å°ä¸­æ‰¾åˆ°å±äºè‡ªå·±çš„ä¹è¶£ã€‚  
> â€œé’ç®€ä¸€å±•ï¼Œé£äº‘å†èµ·ã€‚ä¸è¯¸å›å…±èµç››ä¸–ç¹åï¼â€

---

## ä¸»è¦åŠŸèƒ½

![ä¸»é¡µå±•ç¤º](Technical-documentation/èŠå¤©é¡µé¢å±•ç¤º.png)

- **å¤šè§’è‰²æ‰®æ¼”**ï¼šä¸‰åä½™ä½å†å²äººç‰©ï¼Œçš†æœ‰ç‹¬ç‰¹äººè®¾ä¸è¯­è¨€é£æ ¼ï¼Œéšæ—¶åˆ‡æ¢ï¼Œä½“éªŒâ€œç¾¤è‹±èŸèƒâ€ã€‚
  
  ```js
  // filepath: JavaScript/main.js
  if (path.includes('huoqubing')) {
      const huoqubing = new HuoQubing();
      huoqubing.init();
      window.currentCharacter = huoqubing;
  }
  // â€œå¤§æ±‰å† å†›ä¾¯ï¼Œå·²å°±ä½ï¼â€
  ```

- **AIæ™ºèƒ½å¯¹è¯**ï¼šé›†æˆDeepSeekã€é€šä¹‰åƒé—®ã€é˜¿é‡Œäº‘CosyVoice-v1ã€æ¨¡åŠ›æ–¹èˆŸç­‰å¤§æ¨¡å‹APIï¼Œå¦™è¯­è¿ç ï¼ŒçŸ¥æ— ä¸è¨€ï¼Œæ”¯æŒä¸Šä¸‹æ–‡è®°å¿†ã€‚æ— è®ºæ˜¯é—®å…µæ³•ã€è®ºè¯—è¯ã€è°ˆäººç”Ÿï¼Œçš†å¯å¯¹ç­”å¦‚æµã€‚
  
  ```js
  // filepath: JavaScript/apiRequest.js
  export async function sendMessage(API_KEY, messageHistory, userInput, isRephrase, chatContainer, handleRephrase, callback) {
      // ...AIå¯¹è¯è¯·æ±‚ä¸å›è°ƒ...
  }
  // â€œAIå°ç”Ÿï¼Œæ„¿é—»å…¶è¯¦ï¼â€
  ```

- **è¯­éŸ³åˆæˆ**ï¼šæ¯ä½è§’è‰²çš†æœ‰ä¸“å±è¯­éŸ³å‚æ•°ï¼Œé˜¿é‡Œäº‘TTSåŠ æŒï¼Œé—­çœ¼è†å¬ï¼Œä»¿ä½›å¤äººäº²ä¸´ã€‚æ›¹æ“ä¹‹é›„æµ‘ã€å­”å­ä¹‹æ¸©é›…ã€éœå»ç—…ä¹‹è‹±æ°”ï¼Œçš†å¯è€³é—»ã€‚
  
  ```js
  // filepath: JavaScript/speechSynthesis.js
  export async function synthesizeSpeech(text, character = "é»˜è®¤") {
      // ...è¯­éŸ³åˆæˆé€»è¾‘...
  }
  // â€œå¬å›ä¸€å¸­è¯ï¼Œå¦‚é—»å¤äººå£°ã€‚â€
  ```

- **å†å²å¯¹è¯è®°å½•**ï¼šè‡ªåŠ¨ä¿å­˜æ¯ä½è§’è‰²çš„å¯¹è¯å†å²ï¼Œæ–­ç‚¹ç»­èŠï¼Œå¾€äº‹å¦‚çƒŸï¼Œéšæ—¶ç¿»é˜…ã€‚æ˜¨æ—¥ä¹‹è¯­ï¼Œä»Šæ—¥å¯ç»­ï¼Œå‰å°˜æ—§æ¢¦ï¼Œä¸€é”®é‡æ¸©ã€‚
  
  ```js
  // filepath: JavaScript/baseCharacter.js
  loadHistory() {
      const savedHistory = localStorage.getItem(`chatHistory_${this.name}`);
      // ...å†å²è®°å½•åŠ è½½ä¸æ¢å¤...
  }
  // â€œå‰å°˜æ—§æ¢¦ï¼Œä¸€é”®é‡æ¸©ã€‚â€
  ```

- **ç•Œé¢è‡ªé€‚åº”**ï¼šåŠå±/å…¨å±éšå¿ƒåˆ‡æ¢ï¼ŒWindowsç«¯å°çª—å¤§å±çš†å¯ç•…èŠï¼Œå¤ä»Šæ— ç•Œã€‚æ— è®ºæ¡ˆå¤´å°æ†©ï¼Œè¿˜æ˜¯å¤œæ·±ç‹¬åï¼Œçš†å¯ä¸å¤äººå…±è¯æ¡‘éº»ã€‚
  
  ```js
  // filepath: JavaScript/messageHandler.js
  const halfScreen = localStorage.getItem('halfScreen') === 'true';
  if (halfScreen) {
      chatContainer.style.position = 'fixed';
      chatContainer.style.height = '50vh';
      // ...
  }
  // â€œå°å±å¤§å±ï¼Œçš†å¯å®¹æˆ‘ä¸‰åƒè¨€ã€‚â€
  ```

- **ä¸°å¯Œçš„äº¤äº’ä½“éªŒ**ï¼šAIå›å¤å¯é‡è¿°ï¼Œé¢„è®¾é€‰é¡¹ã€èƒŒæ™¯éŸ³ä¹ã€è§†é¢‘ç­‰å¤šæ¨¡æ€äº’åŠ¨ï¼ŒèŠ±æ ·ç™¾å‡ºï¼Œä¹è¶£æ— ç©·ã€‚å¯ä¸€é”®é‡è¿°AIå›å¤ï¼Œäº¦å¯éšå¿ƒåˆ‡æ¢å¤é£BGMï¼Œä»¿ä½›ç½®èº«ç››ä¸–é•¿å®‰ã€æ±Ÿå—æ°´ä¹¡ã€‚
  
  ```js
  // filepath: JavaScript/messageHandler.js
  export function addRephraseButton(messageContainer, handleRephrase) { /* ... */ }

  // filepath: JavaScript/musicControls.js
  export function initMusicControls(characterName) { /* ... */ }

  // filepath: JavaScript/eventListeners.js
  export function createPresetButtons(pullUpMenu, options) { /* ... */ }
  // â€œä¸€é”®é‡è¿°ï¼Œå¦™è¯­è¿ç ï¼›ä¹å£°æ‚ æ‰¬ï¼Œå¤ä»ŠåŒä¹ã€‚â€
  ```

- **è‡ªå®šä¹‰ç”¨æˆ·äººè®¾**ï¼šæ˜µç§°ã€æ€§åˆ«ã€äººç‰©è®¾å®šéšå¿ƒå®šåˆ¶ï¼Œåšè‡ªå·±çš„ä¸»è§’ã€‚ä½ å¯åŒ–èº«å°‘å¹´æ¸¸ä¾ ï¼Œäº¦å¯æ‰®ä½œå·¾å¸¼è‹±é›Œï¼Œä¸å¤äººå…±ä¹¦æ–°ç¯‡ã€‚
- **å¤šè¯­è¨€/å¤šæ¨¡æ€æ‰©å±•**ï¼šåç»­å¯æ”¯æŒå¤šè¯­è¨€ã€å¤šæ¨¡æ€è¾“å…¥è¾“å‡ºï¼Œæµ·çº³ç™¾å·ï¼Œå…¼å®¹å¹¶åŒ…ã€‚


---

## æ–‡ä»¶ç»“æ„

```
â”œâ”€ JavaScript/                # å‰ç«¯ä¸»è¦JSä»£ç 
â”‚  â”œâ”€ main.js                 # å…¥å£é€»è¾‘ï¼Œè§’è‰²åˆ‡æ¢
â”‚  â”œâ”€ baseCharacter.js        # è§’è‰²åŸºç±»ï¼Œé€šç”¨è¡Œä¸º
â”‚  â”œâ”€ speechSynthesis.js      # è¯­éŸ³åˆæˆä¸TTSå‚æ•°
â”‚  â”œâ”€ messageHandler.js       # æ¶ˆæ¯å±•ç¤ºã€æŒ‰é’®ä¸äº¤äº’
â”‚  â”œâ”€ apiRequest.js           # ä¸åç«¯/AIæ¥å£äº¤äº’
â”‚  â”œâ”€ eventListeners.js       # äº‹ä»¶ç»‘å®šä¸UIé€»è¾‘
â”‚  â””â”€ ...                     # å…¶å®ƒåŠŸèƒ½æ¨¡å—
â”œâ”€ characters/                # å„å†å²äººç‰©è§’è‰²å®šä¹‰
â”‚  â”œâ”€ éœå»ç—…/huoqubing.js
â”‚  â”œâ”€ æ›¹æ“/caocao.js
â”‚  â””â”€ ...                     # å…¶å®ƒè§’è‰²
â”œâ”€ assets/                    # é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼‰
â”œâ”€ Technical-documentation/   # æŠ€æœ¯æ–‡æ¡£ä¸å¼€å‘è¯´æ˜
â”œâ”€ README.md                  # é¡¹ç›®è¯´æ˜
â””â”€ ...                        # å…¶å®ƒèµ„æºä¸æ–‡æ¡£
```

---

## å¿«é€Ÿå¼€å§‹

1. **å…‹éš†æœ¬é¡¹ç›®åˆ°æœ¬åœ°**  
   `git clone <your-repo-url>`
2. **é…ç½®APIå¯†é’¥**  
   - å¯åœ¨è¿è¡Œçš„ç«¯å£ä¸­index.htmlä¸­ç‚¹å‡»å³ä¸Šè§’çš„â€œ âš™ï¸ â€ç›´æ¥è¾“å…¥
3. **å¯åŠ¨æœ¬åœ°åç«¯æœåŠ¡**ï¼ˆå¦‚æœ‰ï¼Œè¯¦è§Technical-documentationï¼‰
4. **ç”¨æµè§ˆå™¨æ‰“å¼€æœåŠ¡å™¨ç«¯å£**ï¼Œé€‰æ‹©è§’è‰²å³å¯ä½“éªŒæ²‰æµ¸å¼å¯¹è¯  
   > â€œä¸€é”®ç©¿è¶Šï¼Œå¤ä»ŠåŒå¸­ï¼â€ ğŸ•°ï¸

---

## ä¸»è¦ä¾èµ–
- æ¨¡åŠ›æ–¹èˆŸå¤§æ¨¡å‹APIï¼ˆAIå¯¹è¯ï¼‰
- DeepSeek/é€šä¹‰åƒé—®ç­‰å¤§æ¨¡å‹APIï¼ˆAIå¯¹è¯ï¼‰
- é˜¿é‡Œäº‘è¯­éŸ³åˆæˆTTSï¼ˆè§’è‰²è¯­éŸ³ï¼‰
- åŸç”ŸJavaScript/ES6ï¼Œæ— éœ€ç¬¬ä¸‰æ–¹å‰ç«¯æ¡†æ¶
- å¯é€‰ï¼šNode.jsæœ¬åœ°åç«¯ï¼ˆå¦‚éœ€è‡ªå®šä¹‰APIä»£ç†ï¼‰

---

## è§’è‰²æ‰©å±•è¯´æ˜

- åœ¨`characters/`ç›®å½•ä¸‹æ–°å¢è§’è‰²æ–‡ä»¶ï¼ˆå¦‚`æç™½/libai.js`ï¼‰ï¼Œç»§æ‰¿`BaseCharacter`å¹¶è‡ªå®šä¹‰äººè®¾ã€è¯­éŸ³å‚æ•°ã€é£æ ¼ç­‰ã€‚
- åœ¨`main.js`ä¸­å¼•å…¥æ–°è§’è‰²ï¼Œå¹¶æ³¨å†Œåˆ°è§’è‰²åˆ‡æ¢é€»è¾‘ä¸­ã€‚
- å¯ä¸ºæ–°è§’è‰²é…ç½®ä¸“å±TTSå‚æ•°ï¼Œå®ç°ä¸ªæ€§åŒ–è¯­éŸ³åˆæˆã€‚
-  
  > â€œæ¬²ç©·åƒé‡Œç›®ï¼Œæ›´ä¸Šä¸€å±‚æ¥¼ã€‚â€”â€”è§’è‰²æ‰©å±•ï¼Œéšå¿ƒæ‰€æ¬²ï¼â€

---

## æŠ€æœ¯æ–‡æ¡£ä¸å¼€å‘è¯´æ˜

- `Technical-documentation/`ç›®å½•ä¸‹åŒ…å«è¯¦ç»†çš„å¼€å‘è®¡åˆ’ã€APIå¯¹æ¥è¯´æ˜ã€è§’è‰²æç¤ºè¯å·¥ç¨‹ã€è¯­éŸ³åˆæˆé›†æˆæ–¹æ¡ˆç­‰æ–‡æ¡£ã€‚
- æ¨èå¼€å‘è€…å…ˆé˜…è¯»ç›¸å…³æ–‡æ¡£ï¼Œäº†è§£æ•´ä½“æ¶æ„ä¸æ‰©å±•æ–¹å¼ã€‚
- è‹¥æœ‰ç–‘éš¾ï¼Œå¯ç¿»é˜…æ–‡æ¡£ï¼Œäº¦å¯â€œå¬å”¤â€AIåŠ©æ‰‹ï¼Œç­”ç–‘è§£æƒ‘ã€‚

---

## å¸¸è§é—®é¢˜

- **Qï¼šä¸ºä½•è¯­éŸ³åˆæˆå£°éŸ³ç›¸ä¼¼ï¼Ÿ**  
  Aï¼šå¯åœ¨`speechSynthesis.js`ä¸­ä¸ºæ¯ä¸ªè§’è‰²åˆ†é…ä¸åŒçš„`voice_type`å’Œå‚æ•°ï¼Œæå‡åŒºåˆ†åº¦ã€‚  
  > â€œä¸€äººåƒé¢ï¼Œå£°å£°ä¸åŒã€‚â€
- **Qï¼šå¦‚ä½•ä¿å­˜å’Œæ¢å¤å†å²å¯¹è¯ï¼Ÿ**  
  Aï¼šé¡¹ç›®è‡ªåŠ¨å°†æ¯ä¸ªè§’è‰²çš„å¯¹è¯å†å²ä¿å­˜åœ¨`localStorage`ï¼Œåˆ‡æ¢è§’è‰²æ—¶è‡ªåŠ¨æ¢å¤ã€‚
- **Qï¼šå¦‚ä½•è‡ªå®šä¹‰ç”¨æˆ·äººè®¾ï¼Ÿ**  
  Aï¼šå¯åœ¨ç•Œé¢æˆ–`localStorage`ä¸­è®¾ç½®`userName`ã€`userGender`ã€`userPersona`ç­‰å­—æ®µã€‚
- **Qï¼šä¸ºä½•AIå¶æœ‰â€œå¤±å¿†â€ï¼Ÿ**  
  Aï¼šå¦‚é‡ä¸Šä¸‹æ–‡ä¸¢å¤±ï¼Œå¯åˆ·æ–°é¡µé¢æˆ–é‡æ–°åŠ è½½å†å²ï¼ŒAIè‡ªä¼šâ€œå¿†èµ·å‰å°˜â€ã€‚
- **Qï¼šèƒ½å¦è®©AIåŸè¯—ä½œå¯¹ï¼Ÿ**  
  Aï¼šå½“ç„¶ï¼æ— è®ºäº”è¨€ç»å¥ã€ä¸ƒå¾‹é•¿æ­Œï¼Œçš†å¯ä¸€è¯•ï¼ŒAIè‡ªä¼šâ€œå‡ºå£æˆç« â€ã€‚

---

## è”ç³»ä¸è´¡çŒ®

å¦‚æœ‰å»ºè®®ã€Bugåé¦ˆæˆ–å¸Œæœ›å‚ä¸å¼€å‘ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ï¼Œæˆ–æäº¤Issue/PRã€‚  
äº¦æ¬¢è¿å„è·¯è±ªæ°å…±è¥„ç››ä¸¾ï¼Œæºæ‰‹å†ç°ç››ä¸–é£åï¼

---

> æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ä¸äº¤æµï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”ã€‚
>
> â€œé’ç®€åœ¨æ‰‹ï¼Œå¤ä»Šä»»æˆ‘æ¸¸ï¼â€  

[![é™ˆå“/é’ç®€é—®å¯¹](https://gitee.com/cnt-code/Dialogues-on-Bamboo-Slips/widgets/widget_card.svg?colors=ffffff,000000,000000,000000,ffffff,ababab)](https://gitee.com/cnt-code/Dialogues-on-Bamboo-Slips)
> è‹¥æœ‰ä¸€è¨€ä¸åˆï¼Œè«æ€ªAIâ€œç©¿è¶Šâ€å¤±çµï¼Œä¸”å¾…è¯¸å›æŒ‡æ­£ï¼ğŸ˜„ğŸ“œ
